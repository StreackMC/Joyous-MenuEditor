<!DOCTYPE HTML><html lang="zh-cn">
<head>
  <style></style>
  <title></title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  <script src="./javascript/library/sober@1.1.8.min.js"></script>
  <script type="module" src="./javascript/i18n.js"></script>
  <link rel="stylesheet" href="./css/sober-theme.css" />
  <link rel="stylesheet" href="./css/frame.css" />
  <link rel="stylesheet" href="./css/editor.css" />
  <link rel="stylesheet" href="./css/predef.css" />
</head>
<body>
  <s-page color-theme="green" theme="light">
    <s-appbar>
      <div id="ui-title" slot="headline"></div>

      <s-tooltip data-i18n="ui.tooltip.explorerSwitcher" slot="navigation">
        <s-icon-button id="explorerSwitcher" type="filled-tonal" slot="trigger" onclick="document.querySelector('s-drawer').toggle()">
          <s-icon>
            <svg viewBox="0 -960 960 960">
              <path
                d="M500-640v320l160-160-160-160ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm120-80v-560H200v560h120Zm80 0h360v-560H400v560Zm-80 0H200h120Z">
              </path>
            </svg>
          </s-icon>
        </s-icon-button>
        $$
      </s-tooltip>

      <s-tooltip data-i18n="ui.tooltip.appbarToolsFolded" class="mobile-fold" mobile slot="action">
        <s-icon-button slot="trigger" onclick="">
          <s-icon name="menu"></s-icon>
        </s-icon-button>
        $$
      </s-tooltip>

      <s-tooltip data-i18n="ui.tooltip.revert" class="mobile-fold" slot="action">
        <s-icon-button slot="trigger" data-click="editor.revert">
          <s-icon>
            <svg viewBox="0 -960 960 960">
              <path
                d="M396-200q-97 0-166.5-63T160-420q0-94 69.5-157T396-640h252L544-744l56-56 200 200-200 200-56-56 104-104H396q-63 0-109.5 40T240-420q0 60 46.5 100T396-280h284v80H396Z"
                transform="translate(960, 0) scale(-1, 1)"></path>
            </svg>
          </s-icon>
        </s-icon-button>
        $$
      </s-tooltip>
      <s-tooltip data-i18n="ui.tooltip.redo" class="mobile-fold" slot="action">
        <s-icon-button slot="trigger" data-click="editor.redo">
          <s-icon>
            <svg viewBox="0 -960 960 960">
              <path
                d="M396-200q-97 0-166.5-63T160-420q0-94 69.5-157T396-640h252L544-744l56-56 200 200-200 200-56-56 104-104H396q-63 0-109.5 40T240-420q0 60 46.5 100T396-280h284v80H396Z">
              </path>
            </svg>
          </s-icon>
        </s-icon-button>
        $$
      </s-tooltip>
      <s-tooltip data-i18n="ui.tooltip.save" class="mobile-fold" slot="action">
        <s-icon-button slot="trigger"  data-click="editor.saveBtn">
          <s-icon>
            <svg viewBox="0 -960 960 960">
              <path
                d="M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z">
              </path>
            </svg>
          </s-icon>
        </s-icon-button>
        $$
      </s-tooltip>

    </s-appbar>
    <s-drawer>
      <div id="explorer" slot="start"><s-scroll-view class="unselectable" style="height: 100%; padding-bottom: 1rem;">
      </s-scroll-view></div>
      <s-scroll-view id="editor">

        <s-card id="welcome" type="outlined">
          <div slot="headline" data-i18n="ui.editor.welcome.headline">$$</div>
          <div slot="text">
            <p data-i18n="ui.editor.welcome.text1">$$</p>
            <p data-i18n="ui.editor.welcome.text2">$$</p>
          </div>
          <s-button data-i18n="editor.actions.openFile" slot="action" data-click="editor.openFile">$$</s-button>
          <s-button data-i18n="editor.actions.openFolder" slot="action" data-click="editor.openFolder">$$</s-button>
        </s-card>

        <s-card id="editor-je" type="outlined" class="hide">
          <div slot="headline" data-i18n="ui.editor.je.headline">$$</div>
          <div slot="text">
            <p data-i18n="ui.editor.je.text1">$$</p>
          </div>
        </s-card>

        <s-card id="editor-be" type="outlined" class="hide">
          <div slot="headline" data-i18n="ui.editor.be.headline">$$</div>
          <div slot="text">
            <p data-i18n="ui.editor.be.text1">$$</p>
          </div>
        </s-card>

      </s-scroll-view>
    </s-drawer>
  </s-page>
  <div id="loading" data-status="loading">
    <style>
      /*需要考虑极端情况，也就是只加载了 index.html ，故使用内联样式*/
      div#loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: absolute;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0,0,0,0.1);
        backdrop-filter: blur(10px);
        transition: all 100000ms ease-out;
        /* 添加过渡 */
        opacity: 1;
        transition: opacity 0.6s ease-out;
      }
      div#loading p {
        font-size: large;
        text-align: center;
        line-height: 1.5em;
        min-height: 3em;
        margin: .5em 0 0 0;
      }
      div#loading s-circular-progress, div#loading s-icon {
        width: 2.5em;
        display: none;
      }
      div#loading[data-status="loading"] s-circular-progress {
        display: inherit;
      }
      div#loading[data-status="error"] s-icon {
        display: inherit;
        color: var(--s-color-error,red);
      }
    </style>
    <s-circular-progress indeterminate="true"></s-circular-progress>
    <s-icon>
      <svg viewBox="0 -960 960 960">
        <path
          d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z">
        </path>
      </svg>
    </s-icon>
    <p>正在加载 Joyous Menu Editor</p>
    <script>
      const ele = document.getElementById("loading");
      const p = document.querySelector("div#loading p");
      function putErrorStatusOnLoading(msg) {
        ele.dataset.status = "error";
        p.innerHTML = msg;
      };
      window.addEventListener('load', () => {
        if (ele.dataset.status == "loading") {
          setTimeout(() => {
            ele.style = "opacity:0;pointer-events:none;";
            ele.addEventListener('transitionend', () => {
              ele.remove();
            }, { once: true });
          }, 1000);
        };
      });
      setTimeout(()=>{if(ele&&ele.dataset.status=="loading"){p.innerHTML="仍在加载 Joyous Menu Editor";};}, 15e3);
      setTimeout(()=>{if(ele&&ele.dataset.status=="loading"){p.innerHTML="仍在加载 Joyous Menu Editor<br>似乎用了很长时间，请检查网络连接。";};}, 35e3);
      setTimeout(()=>{if(ele&&ele.dataset.status=="loading"){p.innerHTML="仍在加载 Joyous Menu Editor<br>似乎无法加载。清除缓存后再试，若仍失败请联系我们。";};}, 90e3);
    </script>
  </div>
  <script type="module" src="./javascript/main.js"></script>
</body>
</html>